#!/bin/bash

################################################################################
# Author: Jereelton Teixeira
################################################################################

ARG1="$1"

if ! echo "${ARG1}" | egrep '^[A-Z][a-z]+[A-Z][a-z]+$' >> /dev/null 2>&1
then
    echo "ERROR: Invalid argument to create APP: ${ARG1}, use: AppName !"
    exit
fi

APP_PATH="./app/source"
APP_NAME="$ARG1"

echo "Creating APP: ./app/source/${APP_NAME}"

if [[ -e "./app/source/${APP_NAME}.php" ]]; then
    echo "ERROR: The APP NAME already exists: ${APP_NAME} !"
    exit
fi

touch "./app/source/${APP_NAME}.php"
chmod 775 "./app/source/${APP_NAME}.php"

ATTRIBUTE="attributeSample"

APP_TEMPLATE="
<?php

/**
 *
 * @description: APP Generated by phpHunter
 * @example: ${APP_NAME} Sample
 *
 */

class ${APP_NAME}
{
    private \$${ATTRIBUTE};

    /**
     * @constructor: ${APP_NAME}
    */
    public function __construct(\$${ATTRIBUTE})
    {
        \$this->${ATTRIBUTE} = \$${ATTRIBUTE};
    }

    /**
     * @methods: set${APP_NAME}
     */
    public function set${APP_NAME}()
    {
        //setters...
    }

    /**
     * @methods: get${APP_NAME}
     */
    public function get${APP_NAME}()
    {
        //getters...
    }

    /**
     * @methods: run
     */
    public function run()
    {
        //Run...
    }
}

?>
"

echo "${APP_TEMPLATE}" > "./app/source/${APP_NAME}.php"

echo "APP SOURCE LIST:"
ls -l "./app/source/${APP_NAME}.php"

echo ""
echo "Create APP is finished"

exit
